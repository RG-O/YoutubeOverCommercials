<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="styles/popup.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Condensed:wght@300&display=swap');
    </style>
</head>
<body>
    <br />
    <br />
    <h1><span style="color: red; position: relative; z-index: 100;">YouTube&trade;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br /><span style="color: rgb(140, 179, 210, .9);">Over Commercials</span></h1>
    <br />
    <br />
    <form id="optionsForm">

        <b>Mode:</b>
        <br />

        <label class="commercial-detection-mode-label" for="commercialDetectionMode-auto">Automatic Commercial Detection</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext">Detects when commercials occur and then automatically plays YouTube over top of the commercials.</span></span>
        <input type="radio" id="commercialDetectionMode-auto" name="commercialDetectionMode" value="auto">
        <br>
        <div id="auto" class="commercial-detection-mode-instructions-wrapper">
            <div class="note">
                <b>HOW TO USE</b>: Go to stream that has commercials, make full screen, hit <span class="keyboard-shortcut">Ctrl + Shift + F</span> when there are no commercials on screen, and then follow the on-screen instructions presented.
            </div>
        </div>

        <label class="commercial-detection-mode-label" for="commercialDetectionMode-manual">Manual Commercial Detection</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext">Manually trigger YouTube to play over top of commercials.</span></span>
        <input type="radio" id="commercialDetectionMode-manual" name="commercialDetectionMode" value="manual">
        <br>
        <div id="manual" class="commercial-detection-mode-instructions-wrapper">
            <div class="note">
                <b>HOW TO USE</b>: Go to stream that has commercials, make full screen, hit <span class="keyboard-shortcut">Ctrl + Shift + F</span> when commercials begin and <span class="keyboard-shortcut">Ctrl + Shift + F</span> when commercials end.
                <a href="/instructions.html" target="_blank">Full manual instructions.</a>
            </div>
        </div>


        <br>


        <b>Overlay Type and ID:</b>
        <br />

        <label class="video-type-label" for="overlayVideoType-yt-playlist">YT Playlist</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: -10px;">Plays a YouTube playlist over commercials. Great for music video playlists and more!</span></span>
        <input type="radio" id="overlayVideoType-yt-playlist" name="overlayVideoType" value="yt-playlist">
        <br>
        <div id="yt-playlist" class="id-field-wrapper">
            <label>ID:</label>
            <div>
                <input type="text" name="ytPlaylistID" id="ytPlaylistID">
            </div>
        </div>

        <label class="video-type-label" for="overlayVideoType-yt-video">Single YT Video</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: -10px;">Plays just a single YT video over commercials. Great for longer YT videos.</span></span>
        <input type="radio" id="overlayVideoType-yt-video" name="overlayVideoType" value="yt-video">
        <br>
        <div id="yt-video" class="id-field-wrapper">
            <label>ID:</label>
            <div>
                <input type="text" name="ytVideoID" id="ytVideoID">
            </div>
        </div>

        <label class="video-type-label" for="overlayVideoType-yt-live">YT Live</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="width: 210px; left: -10px;">Plays a live YT video. Unlike the YT options above that pause the YT video when commercials end and play when they start, this mode just mutes and hides the live YT video when commercials are over, but continues to play. This is great for live play-by-play or reaction videos to watch them during the commercials of the game they are reacting to. Also try adjusting PiP settings down below!</span></span>
        <input type="radio" id="overlayVideoType-yt-live" name="overlayVideoType" value="yt-live">
        <br>
        <div id="yt-live" class="id-field-wrapper">
            <label>ID:</label>
            <div>
                <input type="text" name="ytLiveID" id="ytLiveID">
            </div>
        </div>

        <label class="video-type-label" for="overlayVideoType-spotify">Spotify</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: -10px;">Plays a spotify playlist of your choice during commercials. Tip: you can change the song/playlist from your phone if you also have the app there.</span></span>
        <input type="radio" id="overlayVideoType-spotify" name="overlayVideoType" value="spotify">
        <br>
        <div id="spotify" class="id-field-wrapper">
            <span class="note">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Will prompt you to select playlist from Spotify.<br />
                <span style="color: red;">Note: To use this setting, you must be logged into Spotify on this browser prior to initiating extension.</span>
            </span>
        </div>

        <label class="video-type-label" for="overlayVideoType-other-tabs">Other Tab Audio</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="width: 250px; top: -185px; left: -120px;">You can play any audio from a different tab in your browser and then this extension will unmute that audio during commercials. Great if you want to play music from a different site besides spotify or maybe the radio broadcast of the event you are watching. Fun use case: If your computer is plugged into two different TVs or monitors and you are playing your main game on one and a secondary game on the other. You can set this up to play audio from your secondary game while your main one goes to commercial.</span></span>
        <input type="radio" id="overlayVideoType-other-tabs" name="overlayVideoType" value="other-tabs">
        <br>
        <div id="other-tabs" class="id-field-wrapper">
            <span class="note">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Will mute/unmute audio playing from other tabs.
            </span>
        </div>

        <label class="video-type-label" for="overlayVideoType-other-video">Non-YT Video </label><span class="note">(experimental)</span><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="width: 240px; top: -115px; left: -160px;">Can play videos from other websites, besides YouTube. Great for playing movies or shows over top of commercials. Doesn't work from all websites. If you run into issues, trying finding an ignore x-frame options/header browser extension (at your own risk) and using that along with this.'</span></span>
        <input type="radio" id="overlayVideoType-other-video" name="overlayVideoType" value="other-video">
        <br>
        <div id="other-video" class="id-field-wrapper">
            <label>URL:</label>
            <div>
                <input type="text" name="otherVideoURL" id="otherVideoURL">
            </div>
        </div>

        <label class="video-type-label" for="overlayVideoType-other-live">Non-YT Live Stream </label><span class="note">(experimental)</span><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="width: 210px; top: -85px; left: -160px;">Can play live videos/streams from other websites, besides YouTube. Great for watching other games during commercials of the main game you are watching. Also try adjusting PiP settings down below!</span></span>
        <input type="radio" id="overlayVideoType-other-live" name="overlayVideoType" value="other-live">
        <br>
        <div id="other-live" class="id-field-wrapper">
            <label>URL:</label>
            <div>
                <input type="text" name="otherLiveURL" id="otherLiveURL">
            </div>
        </div>
        <br>


        <button id="expand-button" type="button" class="collapsible">Show Advanced Settings...</button>
        <div class="advanced">
            <span style="text-decoration: underline;"><b>Advanced Settings</b></span><br>
            <br>

            <b>Overlay Video Width (%):</b>
            <input type="number" name="videoOverlayWidth" id="videoOverlayWidth" min="1" max="100"><br>
            <br>


            <b>Overlay Video Height (%):</b>
            <input type="number" name="videoOverlayHeight" id="videoOverlayHeight" min="1" max="100"><br>
            <br>


            <b>Fade Main/Background Video During Commercials (%):</b>
            <input type="number" name="mainVideoFade" id="mainVideoFade" min="0" max="99"><br>
            <br>


            <b>X Display:</b>
            <label class="display-location" for="overlayVideoLocationHorizontal-right">Right</label>
            <input class="display-location" type="radio" id="overlayVideoLocationHorizontal-right" name="overlayVideoLocationHorizontal" value="right">

            <label class="display-location" for="overlayVideoLocationHorizontal-middle">Middle</label>
            <input class="display-location" type="radio" id="overlayVideoLocationHorizontal-middle" name="overlayVideoLocationHorizontal" value="middle">

            <label class="display-location" for="overlayVideoLocationHorizontal-left">Left</label>
            <input class="display-location" type="radio" id="overlayVideoLocationHorizontal-left" name="overlayVideoLocationHorizontal" value="left">
            <br>
            <br>


            <b>Y Display:</b>
            <label class="display-location" for="overlayVideoLocationVertical-top">Top</label>
            <input class="display-location" type="radio" id="overlayVideoLocationVertical-top" name="overlayVideoLocationVertical" value="top"><br>

            <label class="display-location" for="overlayVideoLocationVertical-middle">Middle</label>
            <input class="display-location" type="radio" id="overlayVideoLocationVertical-middle" name="overlayVideoLocationVertical" value="middle"><br>

            <label class="display-location" for="overlayVideoLocationVertical-bottom">Bottom</label>
            <input class="display-location" type="radio" id="overlayVideoLocationVertical-bottom" name="overlayVideoLocationVertical" value="bottom"><br>
            <br>


            <input type="checkbox" name="shouldHideYTBackground" id="shouldHideYTBackground">
            <label class="checkbox-label" for="shouldHideYTBackground">Hide Black Background</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext">Hides the black background that shows behind youtube videos that sometimes peaks out the sides of the video depending on the aspect ratio. This also attempts to do hide the black background for non youtube videos.</span></span><br>

            <input type="checkbox" name="shouldClickNextOnPlaySpotify" id="shouldClickNextOnPlaySpotify">
            <label class="checkbox-label" for="shouldClickNextOnPlaySpotify">Auto Next Song</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: 0px;">For Spotify mode only. Automatically plays the next song when a commercial is detected. Uncheck this if you would like it to resume where a song left of when the last commercial ended.</span></span><br>

            <input type="checkbox" name="isOverlayVideoZoomMode" id="isOverlayVideoZoomMode">
            <label class="checkbox-label" for="isOverlayVideoZoomMode">Non-YT Video Zoom</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: 0px;">Trying to play a non YouTube video over commercials and the overlay shows other info on the site besides just the video or some of the video is cut off? Try enabling this setting to fix it!</span></span><br>

            <input type="checkbox" name="isOtherSiteTroubleshootMode" id="isOtherSiteTroubleshootMode">
            <label class="checkbox-label" for="isOtherSiteTroubleshootMode">Non-YT Video Troubleshoot</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext">Trying to play a non YouTube video over commercials and the video will not mute/unmute or play/pause when it is supposed to? Try enabling this setting to fix it!</span></span><br>

            <input type="checkbox" name="isOppositePixelDetectionMode" id="isOppositePixelDetectionMode">
            <label class="checkbox-label" for="isOppositePixelDetectionMode">Reverse Pixel Detection Mode</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="width: 210px; left: -160px;">Instead of detecting commercial breaks when a pixel is not a specific color, this mode detects the breaks by the pixel being a specific color. This mode works great for streams that don't actually show commercials, but instead display some sort of image or looping video while the program is on commercial break.</span></span><br>

            <input type="checkbox" name="isPiPMode" id="isPiPMode">
            <label class="checkbox-label" for="isPiPMode">PiP Mode</label><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: 0px;">For YT Live and Non-YT Live Stream modes only. Instead of hiding the overlay video when out of commercial, this sets the video in the corner in a sort of Picture in Picture (PiP) mode.</span></span><br>
            <br>


            <div class="pip-fields-wrapper">

                <b>PiP Width (%):</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: 0px;">Setting for YT Live and Non-YT Live Stream modes with PiP enabled only. Percentatage of the width of the screen the overlay video takes up while in PiP mode.</span></span>
                <input type="number" name="pipWidth" id="pipWidth" min="1" max="50"><br>
                <br>

                <b>PiP Height (%):</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: 0px;">Setting for YT Live and Non-YT Live Stream modes with PiP enabled only. Percentatage of the height of the screen the overlay video takes up while in PiP mode.</span></span>
                <input type="number" name="pipHeight" id="pipHeight" min="1" max="50"><br>
                <br>


                <b>PiP X Display:</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: 0px;">Setting for YT Live and Non-YT Live Stream modes with PiP enabled only. Option to display the PiP video in the right or left corner.</span></span>
                <label class="display-location" for="pipLocationHorizontal-right">Right</label>
                <input class="display-location" type="radio" id="pipLocationHorizontal-right" name="pipLocationHorizontal" value="right">

                <label class="display-location" for="pipLocationHorizontal-left">Left</label>
                <input class="display-location" type="radio" id="pipLocationHorizontal-left" name="pipLocationHorizontal" value="left">
                <br>
                <br>


                <b>PiP Y Display:</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="left: 0px;">Setting for YT Live and Non-YT Live Stream modes with PiP enabled only. Option to display the PiP video in the top or bottom corner.</span></span>
                <label class="display-location" for="pipLocationVertical-top">Top</label>
                <input class="display-location" type="radio" id="pipLocationVertical-top" name="pipLocationVertical" value="top"><br>

                <label class="display-location" for="pipLocationVertical-bottom">Bottom</label>
                <input class="display-location" type="radio" id="pipLocationVertical-bottom" name="pipLocationVertical" value="bottom"><br>
                <br>

            </div>


            <b>Main/Background Video Volume:</b>
            <br />
            <br />

            <b>Non Commercial Mode (%):</b>
            <input type="number" name="mainVideoVolumeDuringNonCommercials" id="mainVideoVolumeDuringNonCommercials" min="0" max="100"><br>
            <br>

            <b>Commercial Mode (%):</b>
            <input type="number" name="mainVideoVolumeDuringCommercials" id="mainVideoVolumeDuringCommercials" min="0" max="100"><br>
            <br>

            <span class="note">
                Note: Best to keep these values 100 and 0 most of the time, but especially while using over top of YouTubeTV.
            </span>
            <br>
            <br>


            <span style="text-decoration: underline;"><b>Automatic Mode Settings</b></span>
            <br />
            <br />

            <b>Color Mismatch Count Threshold:</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext">Number of times in a row the pixel needs to not match its original color at time of selection before declaring a commercial has begun and playing the video overtop of the commercial. NOTE: While in Reverse Pixel Detection Mode, this value is used count matches before declaring commercial break.</span></span>
            <input type="number" name="mismatchCountThreshold" id="mismatchCountThreshold" min="1"><br>
            <br>

            <b>Color Match Count Threshold:</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext">Number of times in a row the pixel needs to match its original color at time of selection before declaring the program as resumed and hiding the overlaid video. NOTE: While in Reverse Pixel Detection Mode, this value is used count mismatches before declaring being out of commercial break.</span></span>
            <input type="number" name="matchCountThreshold" id="matchCountThreshold" min="1"><br>
            <br>

            <b>Color Difference Threshold:</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="width: 210px; left: -160px;">How different from the original pixel color does the current pixel color need to be before deciding it isn't a matching color. This isn't really a percentage, but more so a made up measurement where around 8-12 is usually the sweet spot. Set higher if you absolutely have to pick a pixel inside a semi-transparent logo/graphic.</span></span>
            <input type="number" name="colorDifferenceMatchingThreshold" id="colorDifferenceMatchingThreshold" min="3" max="88"><br>
            <br>

            <b>Override Cooldown Time (sec):</b><span class="tooltip"><sup>&#x1F6C8;</sup><span class="tooltiptext" style="width: 210px; left: -160px;">Number of seconds after you manually switch in or out of commercial mode before the auto-detection kicks back in again.</span></span>
            <input type="number" name="manualOverrideCooldown" id="manualOverrideCooldown" min="1"><br>
            <br>

            <input type="checkbox" name="isDebugMode" id="isDebugMode">
            <label class="checkbox-label" for="isDebugMode">Set Debug Mode?</label><br>
            <br>
            <br>

        </div>
    </form>
    <br>

    <div>
        <button id="save-button">Save</button>
        <button id="close-button">Close</button>
    </div>

    <script src="scripts/popup.js"></script>

</body>
</html>